# 📜 서울이스케이프룸 예약 매크로 (Seoul Escape Room Bot)

이 스크립트는 **서울이스케이프룸**의 특정 테마와 시간을 자동으로 예약하기 위한 셀레니움(Selenium) 기반 파이썬 매크로입니다.

---

## 🛠️ 1. 환경 설정 (Setup)

### **A. 크롬 디버깅 모드 실행 (필수)**
로그인 세션 유지 및 봇 탐지 우회를 위해 반드시 필요합니다.
1.  **모든 크롬 종료:** 실행 중인 모든 크롬 브라우저 창을 완전히 닫습니다.
2.  **CMD 실행:** `윈도우 키 + R` -> `cmd` 입력 후 엔터.
3.  **명령어 실행:** 아래 명령어를 복사하여 붙여넣으세요.
    ```bash
    chrome.exe --remote-debugging-port=9222 --user-data-dir="C:/chrome_debug_temp"
    ```
4.  **사전 로그인:** 실행된 크롬 창에서 [서울이스케이프룸 홈페이지](https://www.seoul-escape.com/)에 접속하여 **로그인**을 완료합니다.

### **B. 웹드라이버(WebDriver) 설치 및 라이브러리**
1.  **버전 확인:** 크롬 설정 -> Chrome 정보에서 버전 확인 (예: 125.x).
2.  **드라이버 다운로드:** [Chrome for Testing availability](https://googlechromelabs.github.io/chrome-for-testing/)에서 본인 버전과 일치하는 `chromedriver`를 다운로드합니다.
3.  **파일 배치:** 다운로드한 `chromedriver.exe`를 파이썬 스크립트(`.py`) 파일과 **동일한 폴더**에 넣습니다.
4.  **라이브러리 설치:** 터미널(cmd)에서 아래 명령어를 실행합니다.
    ```bash
    pip install selenium
    ```

---

## ⚙️ 2. 사전 설정 (Configuration)

매크로 파일(`macro.py`) 상단의 설정 변수들을 본인의 정보로 수정합니다.
* **`TARGET_BRANCH`**: 지점 번호를 입력합니다.
    * `1`: 홍대점
    * `2`: 인천점
    * `3`: 대구점
    * `4`: 부산점
* **`TARGET_DATE`**: 예약하고자 하는 날짜를 `YYYY-MM-DD` 형식으로 입력합니다. (예: `"2026-01-21"`)
* **`target_theme`**: 예약할 테마의 정확한 명칭 (예: `"만찬"`, `"오모테나시"`)
* **`target_time`**: 예약 희망 시간 (예: `"12:25"`)
* **`user_name`**: 예약자 성함
* **`user_phone`**: 예약자 연락처 (예: `"010-1234-5678"`)
* **`booking_people`**: 예약 인원수 (예: `"2"`, `"4"`)
* **`max_attempts`**: 실패 시 최대 재시도 횟수



## 🔄 3. 메인 로직 플로우 (Main Logic Flow)

스크립트 실행 시 다음과 같은 단계로 예약이 진행됩니다.

1.  **디버깅 포트 연결:** 9222 포트로 활성화된 크롬 창을 제어합니다.
2.  **직링크 접속:** 지점/날짜가 설정된 URL로 즉시 이동하여 로딩 시간을 단축합니다.
3.  **테마 섹션 탐색:** XPath를 사용하여 수많은 테마 중 설정된 `TARGET_THEME` 섹션만 정확히 필터링합니다.
4.  **시간 버튼 검사:** 해당 테마 내의 버튼 중 '예약가능(active1)' 상태인 버튼만 수집합니다.
5.  **JS 기반 클릭:** 목표 시간과 일치하는 버튼을 자바스크립트 명령어로 즉시 클릭합니다 (가림 현상 방지).
6.  **예약 폼 자동 완성:**
    * 성함 및 연락처 필드 자동 입력
    * `Select` 클래스를 통한 예약 인원 드롭다운 선택
    * 개인정보 처리방침 동의 체크박스 강제 활성화
7.  **최종 신청:** 예약 완료 버튼을 클릭하여 예약을 마칩니다.
8.  **에러 핸들링:** 요소 로딩 실패나 시간 버튼 부재 시 설정된 횟수만큼 자동 새로고침 및 재시도를 수행합니다.

---

## ⚠️ 4. 주의 사항 (Caution)

* **중복 프로세스:** 반드시 기존 크롬을 다 끄고 CMD 명령어로 켠 크롬만 사용해야 합니다.
* **인원수 제한:** 테마별 예약 가능 인원(2~4명 등)을 확인하고 변수를 설정하세요.
* **네트워크 환경:** 서버 속도에 따라 `WebDriverWait` 시간을 적절히 조절하시기 바랍니다.

## 사용 목적
본 프로젝트는 다음과 같은 목적으로 제작되었습니다.
* **교육적 목적:** 파이썬 셀레니움(Selenium) 라이브러리를 활용한 웹 자동화 및 크롬 디버깅 모드 제어 학습.
* **개인적 사용:** 본인의 예약 편의성을 높이기 위한 용도.
* **면책 조항:** 본 프로그램의 상업적 이용을 금하며, 무분별한 사용으로 인해 발생하는 모든 책임은 사용자 본인에게 있습니다.